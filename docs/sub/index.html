<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>subscribe to logins</title>
  </head>
  <body>
    <textarea id="ta" style="width:100%;min-height:14rem;margin:0.5em 0;"></textarea>
    <button id="btn" style="background:transparent;border:none;cursor:pointer;color:#0080ff;font-size:1.2em;display:none;">
      Reconnect
    </button>
    <script>
    var ta = document.getElementById('ta'),
        btn = document.getElementById('btn'),
        ws
	  function onmessage(e) {
	      var json = e.data,
	          data = JSON.parse(json),
	          user = data['2']
	      
        ta.value = user['3'] + '\n' + ta.value
	  }
	  function onopen() {
	      ta.value = '--------------- Connected.\n' + ta.value
	      btn.style.display = 'none'
	  }
	  function onclose() {
		    ta.value = '--------------- Disconnected.\n' + ta.value
		    btn.disabled = false
		    btn.style.display = 'inline-block'
	  }
	  function connect() {
	      btn.disabled = true
        ws = new WebSocket('wss://api.dyuproject.com/sub')
        ws.onopen = onopen
	      ws.onclose = onclose
	      ws.onmessage = onmessage
	  }
	  btn.onclick = connect
	  connect()
    </script>
  </body>
</html>
