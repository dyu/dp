var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,f,l){b!=Array.prototype&&b!=Object.prototype&&(b[f]=l.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(b,f,l,m){if(f){l=$jscomp.global;b=b.split(".");for(m=0;m<b.length-1;m++){var d=b[m];d in l||(l[d]={});l=l[d]}b=b[b.length-1];m=l[b];f=f(m);f!=m&&null!=f&&$jscomp.defineProperty(l,b,{configurable:!0,writable:!0,value:f})}};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;
$jscomp.Symbol=function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+$jscomp.symbolCounter_++};$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.arrayIterator=function(b){var f=0;return $jscomp.iteratorPrototype(function(){return f<b.length?{done:!1,value:b[f++]}:{done:!0}})};$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};
$jscomp.iteratorFromArray=function(b,f){$jscomp.initSymbolIterator();b instanceof String&&(b+="");var l=0,m={next:function(){if(l<b.length){var d=l++;return{value:f(d,b[d]),done:!1}}m.next=function(){return{done:!0,value:void 0}};return m.next()}};m[Symbol.iterator]=function(){return m};return m};$jscomp.polyfill("Array.prototype.entries",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(b,l){return[b,l]})}},"es6-impl","es3");
$jscomp.makeIterator=function(b){$jscomp.initSymbolIterator();var f=b[Symbol.iterator];return f?f.call(b):$jscomp.arrayIterator(b)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(b){function f(){this.batch_=null}function l(c){return c instanceof d?c:new d(function(b,d){b(c)})}if(b&&!$jscomp.FORCE_POLYFILL_PROMISE)return b;f.prototype.asyncExecute=function(c){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(c);return this};f.prototype.asyncExecuteBatch_=function(){var c=this;this.asyncExecuteFunction(function(){c.executeBatch_()})};var m=$jscomp.global.setTimeout;f.prototype.asyncExecuteFunction=function(c){m(c,
0)};f.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var c=this.batch_;this.batch_=[];for(var b=0;b<c.length;++b){var d=c[b];delete c[b];try{d()}catch(p){this.asyncThrow_(p)}}}this.batch_=null};f.prototype.asyncThrow_=function(b){this.asyncExecuteFunction(function(){throw b;})};var d=function(b){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var c=this.createResolveAndReject_();try{b(c.resolve,c.reject)}catch(A){c.reject(A)}};d.prototype.createResolveAndReject_=
function(){function b(b){return function(c){f||(f=!0,b.call(d,c))}}var d=this,f=!1;return{resolve:b(this.resolveTo_),reject:b(this.reject_)}};d.prototype.resolveTo_=function(b){if(b===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(b instanceof d)this.settleSameAsPromise_(b);else{a:switch(typeof b){case "object":var c=null!=b;break a;case "function":c=!0;break a;default:c=!1}c?this.resolveToNonPromiseObj_(b):this.fulfill_(b)}};d.prototype.resolveToNonPromiseObj_=function(b){var c=
void 0;try{c=b.then}catch(A){this.reject_(A);return}"function"==typeof c?this.settleSameAsThenable_(c,b):this.fulfill_(b)};d.prototype.reject_=function(b){this.settle_(2,b)};d.prototype.fulfill_=function(b){this.settle_(1,b)};d.prototype.settle_=function(b,d){if(0!=this.state_)throw Error("Cannot settle("+b+", "+d|"): Promise already settled in state"+this.state_);this.state_=b;this.result_=d;this.executeOnSettledCallbacks_()};d.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var b=
this.onSettledCallbacks_,d=0;d<b.length;++d)b[d].call(),b[d]=null;this.onSettledCallbacks_=null}};var I=new f;d.prototype.settleSameAsPromise_=function(b){var d=this.createResolveAndReject_();b.callWhenSettled_(d.resolve,d.reject)};d.prototype.settleSameAsThenable_=function(b,d){var c=this.createResolveAndReject_();try{b.call(d,c.resolve,c.reject)}catch(p){c.reject(p)}};d.prototype.then=function(b,f){function c(b,d){return"function"==typeof b?function(d){try{l(b(d))}catch(W){h(W)}}:d}var l,h,m=new d(function(b,
d){l=b;h=d});this.callWhenSettled_(c(b,l),c(f,h));return m};d.prototype.catch=function(b){return this.then(void 0,b)};d.prototype.callWhenSettled_=function(b,d){function c(){switch(f.state_){case 1:b(f.result_);break;case 2:d(f.result_);break;default:throw Error("Unexpected state: "+f.state_);}}var f=this;null==this.onSettledCallbacks_?I.asyncExecute(c):this.onSettledCallbacks_.push(function(){I.asyncExecute(c)})};d.resolve=l;d.reject=function(b){return new d(function(d,c){c(b)})};d.race=function(b){return new d(function(d,
c){for(var f=$jscomp.makeIterator(b),h=f.next();!h.done;h=f.next())l(h.value).callWhenSettled_(d,c)})};d.all=function(b){var c=$jscomp.makeIterator(b),f=c.next();return f.done?l([]):new d(function(b,d){function h(d){return function(c){m[d]=c;k--;0==k&&b(m)}}var m=[],k=0;do m.push(void 0),k++,l(f.value).callWhenSettled_(h(m.length-1),d),f=c.next();while(!f.done)})};return d},"es6-impl","es3");
(function(){function b(a){var e=a.status;if(200>e||299<e)throw e;return a.text()}function f(a){var e=a.charAt(0),b=a.length,b="\n"===a.charAt(b-1)?b-2:b;if("+"===e){a=JSON.parse(a.substring(1,b));if(a[0])throw a;return 2===a.length?a[1]:a}if("-"!==e)throw Error("Malformed response.");if("["!==a.charAt(1))throw Error(a.substring(1,b));throw JSON.parse(a.substring(1,b));}function l(a){a=O.getItem(a);return null==a?null:JSON.parse(a)}function m(a,e){try{return O.setItem(a,JSON.stringify(e)),!0}catch(g){return!1}}
function d(a){return ha.hex(a)}function I(a){return Array.isArray(a)?a[1]["1"]:String(a)}function c(a){ba=a;P||(window.handleOauth=a)}function ga(a){a=JSON.parse(a.data);Array.isArray(a)&&3===a.length&&a[2]===X&&ba(a[0],a[1])}function A(){}function p(a){for(var e=arguments,b,d,B=1,c=arguments.length;B<c;B++)for(b in d=e[B],d)a[b]=d[b];return a}function h(a,e){e.appendChild(a)}function C(a){a.parentNode.removeChild(a)}function q(a){return document.createElement(a)}function k(a){return document.createTextNode(a)}
function aa(a,e,b,d){for(var g in e)if(g in b){var c=b[g],f=d[g];if(c!==f||c&&"object"===typeof c||"function"===typeof c){var G=e[g];if(G)for(var h=0;h<G.length;h+=1){var k=G[h];k.__calling||(k.__calling=!0,k.call(a,c,f),k.__calling=!1)}}}}function W(a,b){function e(a){b.set({errmsg:""})}function d(a){b.pop("google")}function c(a){b.pop("github")}function f(a){b.pop("gitlab")}function l(a){b.pop("bitbucket")}function m(a){b.pop("facebook")}function x(a){b.logout()}var Q,R,S,T,p,r=q("div");r.className=
Q=a.errmsg?"msg error":"hide";var y=q("b");r.appendChild(y);y.addEventListener("click",e,!1);h(k("x"),y);h(k("\n  "),r);var n=q("span");r.appendChild(n);var u=k(R=a.errmsg);n.appendChild(u);var A=k("\n"),t=q("div");t.className=S=a.authenticated?"hide":"";n=q("span");t.appendChild(n);h(k("Login with"),n);h(k("\n  "),t);var D=q("button");t.appendChild(D);D.className="stripped";D.addEventListener("click",d,!1);h(k("google"),D);h(k(" |\n  "),t);var E=q("button");t.appendChild(E);E.className="stripped";
E.addEventListener("click",c,!1);h(k("github"),E);h(k(" |\n  "),t);var F=q("button");t.appendChild(F);F.className="stripped";F.addEventListener("click",f,!1);h(k("gitlab"),F);h(k(" |\n  "),t);var v=q("button");t.appendChild(v);v.className="stripped";v.addEventListener("click",l,!1);h(k("bitbucket"),v);h(k(" |\n  "),t);var J=q("button");t.appendChild(J);J.className="stripped";J.addEventListener("click",m,!1);h(k("facebook"),J);var ca=k("\n"),z=q("div");z.className=T=a.authenticated?"":"hide";n=q("span");
z.appendChild(n);n.className="name";var da=k(p=a.user_nick);n.appendChild(da);h(k("\u00a0\u00a0\n  "),z);var K=q("button");z.appendChild(K);K.className="outlined";K.addEventListener("click",x,!1);h(k("Logout"),K);h(k("\n  "),z);n=q("div");z.appendChild(n);n.className="header";h(k("Users"),n);h(k("\n  "),z);for(var n=a.users,w=[],H=0;H<n.length;H+=1)w[H]=ea(a,n,n[H],H,b),w[H].mount(z,null);return{mount:function(a,b){a.insertBefore(r,b);a.insertBefore(A,b);a.insertBefore(t,b);a.insertBefore(ca,b);a.insertBefore(z,
b)},update:function(a,v){Q!==(Q=v.errmsg?"msg error":"hide")&&(r.className=Q);R!==(R=v.errmsg)&&(u.data=R);S!==(S=v.authenticated?"hide":"")&&(t.className=S);T!==(T=v.authenticated?"":"hide")&&(z.className=T);p!==(p=v.user_nick)&&(da.data=p);var e=v.users;if("users"in a){for(var g=0;g<e.length;g+=1)w[g]?w[g].update(a,v,e,e[g],g):(w[g]=ea(v,e,e[g],g,b),w[g].mount(z,null));for(;g<w.length;g+=1)w[g].unmount(),w[g].destroy();w.length=e.length}},unmount:function(){C(r);C(A);C(t);C(ca);C(z);for(var a=0;a<
w.length;a+=1)w[a].unmount()},destroy:function(){y.removeEventListener("click",e,!1);D.removeEventListener("click",d,!1);E.removeEventListener("click",c,!1);F.removeEventListener("click",f,!1);v.removeEventListener("click",l,!1);J.removeEventListener("click",m,!1);K.removeEventListener("click",x,!1);for(var a=0;a<w.length;a+=1)w[a]&&w[a].destroy(!1)}}}function ea(a,b,g,d,c){var e,f,B=q("div");B.className="name item";B.style.cssText=e="color:"+y.helpers.toHexColor(g["3"]);var G=k(f=g["3"]);B.appendChild(G);
return{mount:function(a,b){a.insertBefore(B,b)},update:function(a,b,g,d,c){e!==(e="color:"+y.helpers.toHexColor(d["3"]))&&(B.style.cssText=e);f!==(f=d["3"])&&(G.data=f)},unmount:function(){C(B)},destroy:A}}function L(a){a=a||{};this._state=p(y.data(),a.data);this._observers={pre:Object.create(null),post:Object.create(null)};this._handlers=Object.create(null);this._root=a._root||this;this._yield=a._yield;this._torndown=!1;this._fragment=W(this._state,this);a.target&&this._fragment.mount(a.target,null);
a._root?a._root._renderHooks.push(y.oncreate.bind(this)):y.oncreate.call(this)}(function(a){function b(a){"string"!==typeof a&&(a=String(a));if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(a))throw new TypeError("Invalid character in header field name");return a.toLowerCase()}function g(a){"string"!==typeof a&&(a=String(a));return a}function d(a){var b={next:function(){var b=a.shift();return{done:void 0===b,value:b}}};u.iterable&&(b[Symbol.iterator]=function(){return b});return b}function c(a){this.map={};a instanceof
c?a.forEach(function(a,b){this.append(b,a)},this):a&&Object.getOwnPropertyNames(a).forEach(function(b){this.append(b,a[b])},this)}function f(a){if(a.bodyUsed)return Promise.reject(new TypeError("Already read"));a.bodyUsed=!0}function h(a){return new Promise(function(b,e){a.onload=function(){b(a.result)};a.onerror=function(){e(a.error)}})}function k(a){var b=new FileReader,e=h(b);b.readAsArrayBuffer(a);return e}function l(a){a=new Uint8Array(a);for(var b=Array(a.length),e=0;e<a.length;e++)b[e]=String.fromCharCode(a[e]);
return b.join("")}function m(a){if(a.slice)return a.slice(0);var b=new Uint8Array(a.byteLength);b.set(new Uint8Array(a));return b.buffer}function q(){this.bodyUsed=!1;this._initBody=function(a){if(this._bodyInit=a)if("string"===typeof a)this._bodyText=a;else if(u.blob&&Blob.prototype.isPrototypeOf(a))this._bodyBlob=a;else if(u.formData&&FormData.prototype.isPrototypeOf(a))this._bodyFormData=a;else if(u.searchParams&&URLSearchParams.prototype.isPrototypeOf(a))this._bodyText=a.toString();else if(u.arrayBuffer&&
u.blob&&t(a))this._bodyArrayBuffer=m(a.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else if(u.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(a)||D(a)))this._bodyArrayBuffer=m(a);else throw Error("unsupported BodyInit type");else this._bodyText="";this.headers.get("content-type")||("string"===typeof a?this.headers.set("content-type","text/plain;charset\x3dUTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u.searchParams&&URLSearchParams.prototype.isPrototypeOf(a)&&
this.headers.set("content-type","application/x-www-form-urlencoded;charset\x3dUTF-8"))};u.blob&&(this.blob=function(){var a=f(this);if(a)return a;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):
this.blob().then(k)});this.text=function(){var a=f(this);if(a)return a;if(this._bodyBlob){var a=this._bodyBlob,b=new FileReader,e=h(b);b.readAsText(a);return e}if(this._bodyArrayBuffer)return Promise.resolve(l(this._bodyArrayBuffer));if(this._bodyFormData)throw Error("could not read FormData body as text");return Promise.resolve(this._bodyText)};u.formData&&(this.formData=function(){return this.text().then(x)});this.json=function(){return this.text().then(JSON.parse)};return this}function p(a,b){b=
b||{};var e=b.body;if("string"===typeof a)this.url=a;else{if(a.bodyUsed)throw new TypeError("Already read");this.url=a.url;this.credentials=a.credentials;b.headers||(this.headers=new c(a.headers));this.method=a.method;this.mode=a.mode;e||null==a._bodyInit||(e=a._bodyInit,a.bodyUsed=!0)}this.credentials=b.credentials||this.credentials||"omit";if(b.headers||!this.headers)this.headers=new c(b.headers);a=b.method||this.method||"GET";var g=a.toUpperCase();this.method=-1<E.indexOf(g)?g:a;this.mode=b.mode||
this.mode||null;this.referrer=null;if(("GET"===this.method||"HEAD"===this.method)&&e)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(e)}function x(a){var b=new FormData;a.trim().split("\x26").forEach(function(a){if(a){var e=a.split("\x3d");a=e.shift().replace(/\+/g," ");e=e.join("\x3d").replace(/\+/g," ");b.append(decodeURIComponent(a),decodeURIComponent(e))}});return b}function y(a){var b=new c;a.split("\r\n").forEach(function(a){var e=a.split(":");if(a=e.shift().trim())e=
e.join(":").trim(),b.append(a,e)});return b}function r(a,b){b||(b={});this.type="default";this.status="status"in b?b.status:200;this.ok=200<=this.status&&300>this.status;this.statusText="statusText"in b?b.statusText:"OK";this.headers=new c(b.headers);this.url=b.url||"";this._initBody(a)}if(!a.fetch){var A="Symbol"in a&&"iterator"in Symbol,n;if(n="FileReader"in a&&"Blob"in a)try{new Blob,n=!0}catch(v){n=!1}var u={searchParams:"URLSearchParams"in a,iterable:A,blob:n,formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in
a};if(u.arrayBuffer){var C="[object Int8Array];[object Uint8Array];[object Uint8ClampedArray];[object Int16Array];[object Uint16Array];[object Int32Array];[object Uint32Array];[object Float32Array];[object Float64Array]".split(";");var t=function(a){return a&&DataView.prototype.isPrototypeOf(a)};var D=ArrayBuffer.isView||function(a){return a&&-1<C.indexOf(Object.prototype.toString.call(a))}}c.prototype.append=function(a,e){a=b(a);e=g(e);var d=this.map[a];d||(d=[],this.map[a]=d);d.push(e)};c.prototype["delete"]=
function(a){delete this.map[b(a)]};c.prototype.get=function(a){return(a=this.map[b(a)])?a[0]:null};c.prototype.getAll=function(a){return this.map[b(a)]||[]};c.prototype.has=function(a){return this.map.hasOwnProperty(b(a))};c.prototype.set=function(a,e){this.map[b(a)]=[g(e)]};c.prototype.forEach=function(a,b){Object.getOwnPropertyNames(this.map).forEach(function(e){this.map[e].forEach(function(g){a.call(b,g,e,this)},this)},this)};c.prototype.keys=function(){var a=[];this.forEach(function(b,e){a.push(e)});
return d(a)};c.prototype.values=function(){var a=[];this.forEach(function(b){a.push(b)});return d(a)};c.prototype.entries=function(){var a=[];this.forEach(function(b,e){a.push([e,b])});return d(a)};u.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var E="DELETE GET HEAD OPTIONS POST PUT".split(" ");p.prototype.clone=function(){return new p(this,{body:this._bodyInit})};q.call(p.prototype);q.call(r.prototype);r.prototype.clone=function(){return new r(this._bodyInit,{status:this.status,
statusText:this.statusText,headers:new c(this.headers),url:this.url})};r.error=function(){var a=new r(null,{status:0,statusText:""});a.type="error";return a};var F=[301,302,303,307,308];r.redirect=function(a,b){if(-1===F.indexOf(b))throw new RangeError("Invalid status code");return new r(null,{status:b,headers:{location:a}})};a.Headers=c;a.Request=p;a.Response=r;a.fetch=function(a,b){return new Promise(function(e,g){var d=new p(a,b),c=new XMLHttpRequest;c.onload=function(){var a={status:c.status,
statusText:c.statusText,headers:y(c.getAllResponseHeaders()||"")};a.url="responseURL"in c?c.responseURL:a.headers.get("X-Request-URL");e(new r("response"in c?c.response:c.responseText,a))};c.onerror=function(){g(new TypeError("Network request failed"))};c.ontimeout=function(){g(new TypeError("Network request failed"))};c.open(d.method,d.url,!0);"include"===d.credentials&&(c.withCredentials=!0);"responseType"in c&&u.blob&&(c.responseType="blob");d.headers.forEach(function(a,b){c.setRequestHeader(b,
a)});c.send("undefined"===typeof d._bodyInit?null:d._bodyInit)})};a.fetch.polyfill=!0}})("undefined"!==typeof self?self:void 0);var fa=function(){function a(a,b,c,d){this.url=a;this.opts=b;this.ih=c;this.ah=d;this.handlers=[];this.authOk=this.cbFail=null}a.prototype.then=function(a,b){this.cbFail?console.warn("Cannot add a resolve/reject handler once a reject handler is provided."):a?this.handlers.push(a):(this.handlers.push(b),this.run());return this};a.prototype.catch=function(a){this.cbFail?console.warn("Only one reject handler is allowed."):
(this.handlers.push(a),this.run());return this};a.prototype.run=function(a){var b=this.url;a&&(b=b.substring(0,b.lastIndexOf("\x3d")+1)+a);a=fetch(b,this.opts).then(this.ih).then(f);for(var b=this.handlers,e=b.length-1,c=0;c<e;)a.then(b[c++]);a.then(void 0,this.cbFail||(this.cbFail=this.fail.bind(this)))};a.prototype.fail=function(a){if(this.ah&&(401===a||Array.isArray(a)&&3===a[0]))this.ah(this.authOk||(this.authOk=this.run.bind(this)));else this.handlers[this.handlers.length-1](a)};return a}(),
x={auth$$:void 0,get$$:function(a,e,c,d){var g=M.auth$$;U&&(a=U+a);return c||g?new fa(a,e,d||b,g):fetch(a,e).then(d||b).then(f)},post$$:function(a,e,c,d){var g=M.auth$$;e={method:"POST",body:e};U&&(a=U+a);return c||g?new fa(a,e,d||b,g):fetch(a,e).then(d||b).then(f)}};window.rpc_config_d=x;var M=window.rpc_config||x,U=window.rpc_host||"",N={},x=Object.freeze({getItem:function(a){return N[a]},setItem:function(a,b){N[a]=b;return!0},removeItem:function(a){return a in N&&delete N[a]},clear:function(){N=
{};return!0}}),O=window.localStorage||x,ia=function(a){var b=0;a+="x";for(var c=0;c<a.length;c++)2147483647<b&&(b=parseInt(b/137)),b=131*b+a.charCodeAt(c);return b},ja=function(a){var b="#";a.forEach(function(a){16>a&&(b+=0);b+=a.toString(16)});return b},ka=function(a,b,c){a/=360;var e=.5>c?c*(1+b):c+b-c*b,d=2*c-e;return[a+1/3,a,a-1/3].map(function(a){0>a&&a++;1<a&&a--;a=a<1/6?d+6*(e-d)*a:.5>a?e:a<2/3?d+6*(e-d)*(2/3-a):d;return Math.round(255*a)})},x=function(a){a=a||{};var b=[a.lightness,a.saturation].map(function(a){a=
a||[.35,.5,.65];return"[object Array]"===Object.prototype.toString.call(a)?a.concat():[a]});this.L=b[0];this.S=b[1];this.hash=a.hash||ia};x.prototype.hsl=function(a){var b=this.hash(a);a=b%359;b=parseInt(b/360);var c=this.S[b%this.S.length];b=parseInt(b/this.S.length);return[a,c,this.L[b%this.L.length]]};x.prototype.rgb=function(a){a=this.hsl(a);return ka.apply(this,a)};x.prototype.hex=function(a){a=this.rgb(a);return ja(a)};var ha=new x,P=window.auth_host,la=window.auth_iframe||P+"/iframe/",Y=P&&
document.createElement("iframe"),ma=window.location.href,na=window.addEventListener||window.attachEvent,oa=window.addEventListener?"message":"onmessage",ba,Z,X,V,y=function(){var a;c(function(b,c){if(!a.get("loading")){var e=a.m;b?c&&c.es_token?(e.session.auth_data=c,M.get$$("/auth/user/login?es_token\x3d"+c.es_token,void 0).then(e.login$$S).then(void 0,e.login$$F)):e.login$$F("Failed to login to provider."):e.login$$F(c)}});return{data:function(){return{loading:!1,errmsg:"",authenticated:!1,user_nick:"",
users:[]}},helpers:{toHexColor:d},oncreate:function(){a=this;var b=l("access"),c=l("session")||{auth_data:null,user:null};Object.defineProperty(this,"m",{enumerable:!1,value:{login$$S:this.login$$S.bind(this),login$$F:this.login$$F.bind(this),fetch$$S:this.fetch$$S.bind(this),fetch$$F:this.fetch$$F.bind(this),access:b,session:c}});b&&c&&c.user&&b.es_user===c.user["3"]&&(this.set({authenticated:!0,loading:!0,user_nick:b.es_user}),c=this.m,M.post$$("/auth/user/User/list?access_token\x3d"+b.token,'{"1":true}').then(c.fetch$$S).then(void 0,
c.fetch$$F))},methods:{pop:function(a){if(!this.get("loading"))if(this.set({errmsg:""}),P){V||(V=Y.style,V.width="100%",V.border="none",na(oa,ga,!1),document.body.appendChild(Y));Z=Z?"":a+".html";for(var b="",c=0;10>c;c++)b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));X=b;Y.src=la+Z+"#"+X+"~"+a+"~"+ma}else window.open("/login-"+a,"Login","width\x3d450,height\x3d500,location\x3d1,status\x3d1,resizable\x3dyes").moveTo(window.innerWidth/2-225,
window.innerHeight/2-250)},login$$S:function(a){var b=this.m,c=b.session,e=a["2"];a={token:a["1"],es_user:e["3"]};c.user=e;b.access=a;m("session",c);m("access",a);this.set({authenticated:!0,user_nick:a.es_user});M.post$$("/auth/user/User/list?access_token\x3d"+a.token,'{"1":true}').then(b.fetch$$S).then(void 0,b.fetch$$F)},login$$F:function(a){this.set({loading:!1,errmsg:I(a)})},logout:function(){O.removeItem("access");O.removeItem("session");this.set({authenticated:!1,users:[]})},fetch$$S:function(a){this.set({loading:!1,
errmsg:"",users:a["1"]})},fetch$$F:function(a){this.set({loading:!1,errmsg:I(a),users:[]})}}}}();p(L.prototype,y.methods,{get:function(a){return a?this._state[a]:this._state},fire:function(a,b){if(a=a in this._handlers&&this._handlers[a].slice())for(var c=0;c<a.length;c+=1)a[c].call(this,b)},observe:function(a,b,c){var d=c&&c.defer?this._observers.post:this._observers.pre;(d[a]||(d[a]=[])).push(b);c&&!1===c.init||(b.__calling=!0,b.call(this,this._state[a]),b.__calling=!1);return{cancel:function(){var c=
d[a].indexOf(b);~c&&d[a].splice(c,1)}}},on:function(a,b){if("teardown"===a)return this.on("destroy",b);var c=this._handlers[a]||(this._handlers[a]=[]);c.push(b);return{cancel:function(){var a=c.indexOf(b);~a&&c.splice(a,1)}}},set:function(a){this._set(p({},a));this._root._flush()},_flush:function(){if(this._renderHooks)for(;this._renderHooks.length;)this._renderHooks.pop()()}});L.prototype._set=function(a){var b=this._state;this._state=p({},b,a);aa(this,this._observers.pre,a,b);this._fragment.update(a,
this._state);aa(this,this._observers.post,a,b)};L.prototype.teardown=L.prototype.destroy=function(a){this.fire("destroy");!1!==a&&this._fragment.unmount();this._fragment.destroy();this._fragment=null;this._state={};this._torndown=!0};window.home=new L({target:document.getElementById("auth")})})();
//# sourceMappingURL=build.js.map
