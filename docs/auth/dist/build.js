var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,f,k){b!=Array.prototype&&b!=Object.prototype&&(b[f]=k.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(b,f,k,h){if(f){k=$jscomp.global;b=b.split(".");for(h=0;h<b.length-1;h++){var d=b[h];d in k||(k[d]={});k=k[d]}b=b[b.length-1];h=k[b];f=f(h);f!=h&&null!=f&&$jscomp.defineProperty(k,b,{configurable:!0,writable:!0,value:f})}};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;
$jscomp.Symbol=function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+$jscomp.symbolCounter_++};$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.arrayIterator=function(b){var f=0;return $jscomp.iteratorPrototype(function(){return f<b.length?{done:!1,value:b[f++]}:{done:!0}})};$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};
$jscomp.iteratorFromArray=function(b,f){$jscomp.initSymbolIterator();b instanceof String&&(b+="");var k=0,h={next:function(){if(k<b.length){var d=k++;return{value:f(d,b[d]),done:!1}}h.next=function(){return{done:!0,value:void 0}};return h.next()}};h[Symbol.iterator]=function(){return h};return h};$jscomp.polyfill("Array.prototype.entries",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(b,k){return[b,k]})}},"es6-impl","es3");
$jscomp.makeIterator=function(b){$jscomp.initSymbolIterator();var f=b[Symbol.iterator];return f?f.call(b):$jscomp.arrayIterator(b)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(b){function f(){this.batch_=null}function k(c){return c instanceof d?c:new d(function(b,d){b(c)})}if(b&&!$jscomp.FORCE_POLYFILL_PROMISE)return b;f.prototype.asyncExecute=function(c){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(c);return this};f.prototype.asyncExecuteBatch_=function(){var c=this;this.asyncExecuteFunction(function(){c.executeBatch_()})};var h=$jscomp.global.setTimeout;f.prototype.asyncExecuteFunction=function(c){h(c,
0)};f.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var c=this.batch_;this.batch_=[];for(var b=0;b<c.length;++b){var d=c[b];delete c[b];try{d()}catch(C){this.asyncThrow_(C)}}}this.batch_=null};f.prototype.asyncThrow_=function(c){this.asyncExecuteFunction(function(){throw c;})};var d=function(c){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{c(b.resolve,b.reject)}catch(u){b.reject(u)}};d.prototype.createResolveAndReject_=
function(){function b(b){return function(c){u||(u=!0,b.call(d,c))}}var d=this,u=!1;return{resolve:b(this.resolveTo_),reject:b(this.reject_)}};d.prototype.resolveTo_=function(b){if(b===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(b instanceof d)this.settleSameAsPromise_(b);else{a:switch(typeof b){case "object":var c=null!=b;break a;case "function":c=!0;break a;default:c=!1}c?this.resolveToNonPromiseObj_(b):this.fulfill_(b)}};d.prototype.resolveToNonPromiseObj_=function(b){var c=
void 0;try{c=b.then}catch(u){this.reject_(u);return}"function"==typeof c?this.settleSameAsThenable_(c,b):this.fulfill_(b)};d.prototype.reject_=function(b){this.settle_(2,b)};d.prototype.fulfill_=function(b){this.settle_(1,b)};d.prototype.settle_=function(b,d){if(0!=this.state_)throw Error("Cannot settle("+b+", "+d|"): Promise already settled in state"+this.state_);this.state_=b;this.result_=d;this.executeOnSettledCallbacks_()};d.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var b=
this.onSettledCallbacks_,d=0;d<b.length;++d)b[d].call(),b[d]=null;this.onSettledCallbacks_=null}};var I=new f;d.prototype.settleSameAsPromise_=function(b){var d=this.createResolveAndReject_();b.callWhenSettled_(d.resolve,d.reject)};d.prototype.settleSameAsThenable_=function(b,d){var c=this.createResolveAndReject_();try{b.call(d,c.resolve,c.reject)}catch(C){c.reject(C)}};d.prototype.then=function(b,f){function c(b,d){return"function"==typeof b?function(d){try{k(b(d))}catch(S){h(S)}}:d}var k,h,m=new d(function(b,
d){k=b;h=d});this.callWhenSettled_(c(b,k),c(f,h));return m};d.prototype.catch=function(b){return this.then(void 0,b)};d.prototype.callWhenSettled_=function(b,d){function c(){switch(f.state_){case 1:b(f.result_);break;case 2:d(f.result_);break;default:throw Error("Unexpected state: "+f.state_);}}var f=this;null==this.onSettledCallbacks_?I.asyncExecute(c):this.onSettledCallbacks_.push(function(){I.asyncExecute(c)})};d.resolve=k;d.reject=function(b){return new d(function(d,c){c(b)})};d.race=function(b){return new d(function(d,
c){for(var f=$jscomp.makeIterator(b),h=f.next();!h.done;h=f.next())k(h.value).callWhenSettled_(d,c)})};d.all=function(b){var c=$jscomp.makeIterator(b),f=c.next();return f.done?k([]):new d(function(b,d){function h(d){return function(c){y[d]=c;n--;0==n&&b(y)}}var y=[],n=0;do y.push(void 0),n++,k(f.value).callWhenSettled_(h(y.length-1),d),f=c.next();while(!f.done)})};return d},"es6-impl","es3");
(function(){function b(a){var e=a.status;if(200>e||299<e)throw e;return a.text()}function f(a){var e=a.charAt(0),b=a.length,b="\n"===a.charAt(b-1)?b-2:b;if("+"===e){a=JSON.parse(a.substring(1,b));if(a[0])throw a;return 2===a.length?a[1]:a}if("-"!==e)throw Error("Malformed response.");if("["!==a.charAt(1))throw Error(a.substring(1,b));throw JSON.parse(a.substring(1,b));}function k(a){a=T.getItem(a);return null==a?null:JSON.parse(a)}function h(a,e){try{return T.setItem(a,JSON.stringify(e)),!0}catch(g){return!1}}
function d(a){return ka.hex(a)}function I(a,e){window.open(a,e,"width\x3d450,height\x3d500,location\x3d1,status\x3d1,resizable\x3dyes").moveTo(window.innerWidth/2-225,window.innerHeight/2-250)}function c(a){return Array.isArray(a)?a[1]["1"]:String(a)}function ja(a){aa=a;x||(window.handleOauth=a)}function u(a){a=a.data;a="string"===typeof a?JSON.parse(a):a;Array.isArray(a)&&3===a.length&&a[2]===U&&aa(a[0],a[1])}function C(){}function R(a){for(var e=arguments,b,d,D=1,c=arguments.length;D<c;D++)for(b in d=
e[D],d)a[b]=d[b];return a}function m(a,e){e.appendChild(a)}function y(a){a.parentNode.removeChild(a)}function n(a){return document.createElement(a)}function l(a){return document.createTextNode(a)}function S(a,e,b,d){for(var g in e)if(g in b){var c=b[g],f=d[g];if(c!==f||c&&"object"===typeof c||"function"===typeof c){var G=e[g];if(G)for(var h=0;h<G.length;h+=1){var k=G[h];k.__calling||(k.__calling=!0,k.call(a,c,f),k.__calling=!1)}}}}function la(a,e){function b(a){e.set({errmsg:""})}function d(a){e.pop("google")}
function c(a){e.pop("github")}function f(a){e.pop("gitlab")}function h(a){e.pop("bitbucket")}function k(a){e.pop("facebook")}function q(a){e.logout()}var V,W,X,u,x,r=n("div");r.className=V=a.errmsg?"msg error":"hide";var A=n("b");r.appendChild(A);A.addEventListener("click",b,!1);m(l("x"),A);m(l("\n  "),r);var p=n("span");r.appendChild(p);var v=l(W=a.errmsg);p.appendChild(v);var C=l("\n"),t=n("div");t.className=X=a.authenticated?"hide":"";p=n("span");t.appendChild(p);m(l("Login with"),p);m(l("\n  "),
t);var J=n("button");t.appendChild(J);J.className="stripped";J.addEventListener("click",d,!1);m(l("google"),J);m(l(" |\n  "),t);var E=n("button");t.appendChild(E);E.className="stripped";E.addEventListener("click",c,!1);m(l("github"),E);m(l(" |\n  "),t);var F=n("button");t.appendChild(F);F.className="stripped";F.addEventListener("click",f,!1);m(l("gitlab"),F);m(l(" |\n  "),t);var z=n("button");t.appendChild(z);z.className="stripped";z.addEventListener("click",h,!1);m(l("bitbucket"),z);m(l(" |\n  "),
t);var K=n("button");t.appendChild(K);K.className="stripped";K.addEventListener("click",k,!1);m(l("facebook"),K);var ba=l("\n"),B=n("div");B.className=u=a.authenticated?"":"hide";p=n("span");B.appendChild(p);p.className="name";var ca=l(x=a.user_nick);p.appendChild(ca);m(l("\u00a0\u00a0\n  "),B);var L=n("button");B.appendChild(L);L.className="outlined";L.addEventListener("click",q,!1);m(l("Logout"),L);m(l("\n  "),B);p=n("div");B.appendChild(p);p.className="header";m(l("Users"),p);m(l("\n  "),B);for(var p=
a.users,w=[],H=0;H<p.length;H+=1)w[H]=da(a,p,p[H],H,e),w[H].mount(B,null);return{mount:function(a,b){a.insertBefore(r,b);a.insertBefore(C,b);a.insertBefore(t,b);a.insertBefore(ba,b);a.insertBefore(B,b)},update:function(a,b){V!==(V=b.errmsg?"msg error":"hide")&&(r.className=V);W!==(W=b.errmsg)&&(v.data=W);X!==(X=b.authenticated?"hide":"")&&(t.className=X);u!==(u=b.authenticated?"":"hide")&&(B.className=u);x!==(x=b.user_nick)&&(ca.data=x);var z=b.users;if("users"in a){for(var g=0;g<z.length;g+=1)w[g]?
w[g].update(a,b,z,z[g],g):(w[g]=da(b,z,z[g],g,e),w[g].mount(B,null));for(;g<w.length;g+=1)w[g].unmount(),w[g].destroy();w.length=z.length}},unmount:function(){y(r);y(C);y(t);y(ba);y(B);for(var a=0;a<w.length;a+=1)w[a].unmount()},destroy:function(){A.removeEventListener("click",b,!1);J.removeEventListener("click",d,!1);E.removeEventListener("click",c,!1);F.removeEventListener("click",f,!1);z.removeEventListener("click",h,!1);K.removeEventListener("click",k,!1);L.removeEventListener("click",q,!1);for(var a=
0;a<w.length;a+=1)w[a]&&w[a].destroy(!1)}}}function da(a,b,g,d,c){var e,f,D=n("div");D.className="name item";D.style.cssText=e="color:"+A.helpers.toHexColor(g["3"]);var G=l(f=g["3"]);D.appendChild(G);return{mount:function(a,b){a.insertBefore(D,b)},update:function(a,b,g,d,c){e!==(e="color:"+A.helpers.toHexColor(d["3"]))&&(D.style.cssText=e);f!==(f=d["3"])&&(G.data=f)},unmount:function(){y(D)},destroy:C}}function M(a){a=a||{};this._state=R(A.data(),a.data);this._observers={pre:Object.create(null),post:Object.create(null)};
this._handlers=Object.create(null);this._root=a._root||this;this._yield=a._yield;this._torndown=!1;this._fragment=la(this._state,this);a.target&&this._fragment.mount(a.target,null);a._root?a._root._renderHooks.push(A.oncreate.bind(this)):A.oncreate.call(this)}(function(a){function b(a){"string"!==typeof a&&(a=String(a));if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(a))throw new TypeError("Invalid character in header field name");return a.toLowerCase()}function g(a){"string"!==typeof a&&(a=String(a));return a}
function d(a){var b={next:function(){var b=a.shift();return{done:void 0===b,value:b}}};v.iterable&&(b[Symbol.iterator]=function(){return b});return b}function c(a){this.map={};a instanceof c?a.forEach(function(a,b){this.append(b,a)},this):a&&Object.getOwnPropertyNames(a).forEach(function(b){this.append(b,a[b])},this)}function f(a){if(a.bodyUsed)return Promise.reject(new TypeError("Already read"));a.bodyUsed=!0}function h(a){return new Promise(function(b,e){a.onload=function(){b(a.result)};a.onerror=
function(){e(a.error)}})}function k(a){var b=new FileReader,e=h(b);b.readAsArrayBuffer(a);return e}function l(a){a=new Uint8Array(a);for(var b=Array(a.length),e=0;e<a.length;e++)b[e]=String.fromCharCode(a[e]);return b.join("")}function m(a){if(a.slice)return a.slice(0);var b=new Uint8Array(a.byteLength);b.set(new Uint8Array(a));return b.buffer}function n(){this.bodyUsed=!1;this._initBody=function(a){if(this._bodyInit=a)if("string"===typeof a)this._bodyText=a;else if(v.blob&&Blob.prototype.isPrototypeOf(a))this._bodyBlob=
a;else if(v.formData&&FormData.prototype.isPrototypeOf(a))this._bodyFormData=a;else if(v.searchParams&&URLSearchParams.prototype.isPrototypeOf(a))this._bodyText=a.toString();else if(v.arrayBuffer&&v.blob&&t(a))this._bodyArrayBuffer=m(a.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else if(v.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(a)||C(a)))this._bodyArrayBuffer=m(a);else throw Error("unsupported BodyInit type");else this._bodyText="";this.headers.get("content-type")||("string"===
typeof a?this.headers.set("content-type","text/plain;charset\x3dUTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):v.searchParams&&URLSearchParams.prototype.isPrototypeOf(a)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset\x3dUTF-8"))};v.blob&&(this.blob=function(){var a=f(this);if(a)return a;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));
if(this._bodyFormData)throw Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(k)});this.text=function(){var a=f(this);if(a)return a;if(this._bodyBlob){var a=this._bodyBlob,b=new FileReader,e=h(b);b.readAsText(a);return e}if(this._bodyArrayBuffer)return Promise.resolve(l(this._bodyArrayBuffer));if(this._bodyFormData)throw Error("could not read FormData body as text");
return Promise.resolve(this._bodyText)};v.formData&&(this.formData=function(){return this.text().then(u)});this.json=function(){return this.text().then(JSON.parse)};return this}function q(a,b){b=b||{};var e=b.body;if("string"===typeof a)this.url=a;else{if(a.bodyUsed)throw new TypeError("Already read");this.url=a.url;this.credentials=a.credentials;b.headers||(this.headers=new c(a.headers));this.method=a.method;this.mode=a.mode;e||null==a._bodyInit||(e=a._bodyInit,a.bodyUsed=!0)}this.credentials=b.credentials||
this.credentials||"omit";if(b.headers||!this.headers)this.headers=new c(b.headers);a=b.method||this.method||"GET";var g=a.toUpperCase();this.method=-1<E.indexOf(g)?g:a;this.mode=b.mode||this.mode||null;this.referrer=null;if(("GET"===this.method||"HEAD"===this.method)&&e)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(e)}function u(a){var b=new FormData;a.trim().split("\x26").forEach(function(a){if(a){var e=a.split("\x3d");a=e.shift().replace(/\+/g," ");e=e.join("\x3d").replace(/\+/g,
" ");b.append(decodeURIComponent(a),decodeURIComponent(e))}});return b}function x(a){var b=new c;a.split("\r\n").forEach(function(a){var e=a.split(":");if(a=e.shift().trim())e=e.join(":").trim(),b.append(a,e)});return b}function r(a,b){b||(b={});this.type="default";this.status="status"in b?b.status:200;this.ok=200<=this.status&&300>this.status;this.statusText="statusText"in b?b.statusText:"OK";this.headers=new c(b.headers);this.url=b.url||"";this._initBody(a)}if(!a.fetch){var y="Symbol"in a&&"iterator"in
Symbol,p;if(p="FileReader"in a&&"Blob"in a)try{new Blob,p=!0}catch(z){p=!1}var v={searchParams:"URLSearchParams"in a,iterable:y,blob:p,formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};if(v.arrayBuffer){var A="[object Int8Array];[object Uint8Array];[object Uint8ClampedArray];[object Int16Array];[object Uint16Array];[object Int32Array];[object Uint32Array];[object Float32Array];[object Float64Array]".split(";");var t=function(a){return a&&DataView.prototype.isPrototypeOf(a)};var C=ArrayBuffer.isView||
function(a){return a&&-1<A.indexOf(Object.prototype.toString.call(a))}}c.prototype.append=function(a,e){a=b(a);e=g(e);var d=this.map[a];d||(d=[],this.map[a]=d);d.push(e)};c.prototype["delete"]=function(a){delete this.map[b(a)]};c.prototype.get=function(a){return(a=this.map[b(a)])?a[0]:null};c.prototype.getAll=function(a){return this.map[b(a)]||[]};c.prototype.has=function(a){return this.map.hasOwnProperty(b(a))};c.prototype.set=function(a,e){this.map[b(a)]=[g(e)]};c.prototype.forEach=function(a,b){Object.getOwnPropertyNames(this.map).forEach(function(e){this.map[e].forEach(function(g){a.call(b,
g,e,this)},this)},this)};c.prototype.keys=function(){var a=[];this.forEach(function(b,e){a.push(e)});return d(a)};c.prototype.values=function(){var a=[];this.forEach(function(b){a.push(b)});return d(a)};c.prototype.entries=function(){var a=[];this.forEach(function(b,e){a.push([e,b])});return d(a)};v.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var E="DELETE GET HEAD OPTIONS POST PUT".split(" ");q.prototype.clone=function(){return new q(this,{body:this._bodyInit})};n.call(q.prototype);
n.call(r.prototype);r.prototype.clone=function(){return new r(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})};r.error=function(){var a=new r(null,{status:0,statusText:""});a.type="error";return a};var F=[301,302,303,307,308];r.redirect=function(a,b){if(-1===F.indexOf(b))throw new RangeError("Invalid status code");return new r(null,{status:b,headers:{location:a}})};a.Headers=c;a.Request=q;a.Response=r;a.fetch=function(a,b){return new Promise(function(e,
g){var d=new q(a,b),c=new XMLHttpRequest;c.onload=function(){var a={status:c.status,statusText:c.statusText,headers:x(c.getAllResponseHeaders()||"")};a.url="responseURL"in c?c.responseURL:a.headers.get("X-Request-URL");e(new r("response"in c?c.response:c.responseText,a))};c.onerror=function(){g(new TypeError("Network request failed"))};c.ontimeout=function(){g(new TypeError("Network request failed"))};c.open(d.method,d.url,!0);"include"===d.credentials&&(c.withCredentials=!0);"responseType"in c&&
v.blob&&(c.responseType="blob");d.headers.forEach(function(a,b){c.setRequestHeader(b,a)});c.send("undefined"===typeof d._bodyInit?null:d._bodyInit)})};a.fetch.polyfill=!0}})("undefined"!==typeof self?self:void 0);var ea=function(){function a(a,b,c,d){this.url=a;this.opts=b;this.ih=c;this.ah=d;this.handlers=[];this.authOk=this.cbFail=null}a.prototype.then=function(a,b){this.cbFail?console.warn("Cannot add a resolve/reject handler once a reject handler is provided."):a?this.handlers.push(a):(this.handlers.push(b),
this.run());return this};a.prototype.catch=function(a){this.cbFail?console.warn("Only one reject handler is allowed."):(this.handlers.push(a),this.run());return this};a.prototype.run=function(a){var b=this.url;a&&(b=b.substring(0,b.lastIndexOf("\x3d")+1)+a);a=fetch(b,this.opts).then(this.ih).then(f);for(var b=this.handlers,e=b.length-1,c=0;c<e;)a.then(b[c++]);a.then(void 0,this.cbFail||(this.cbFail=this.fail.bind(this)))};a.prototype.fail=function(a){if(this.ah&&(401===a||Array.isArray(a)&&3===a[0]))this.ah(this.authOk||
(this.authOk=this.run.bind(this)));else this.handlers[this.handlers.length-1](a)};return a}(),q={auth$$:void 0,get$$:function(a,e,c,d){var g=N.auth$$;O&&(a=O+a);return c||g?new ea(a,e,d||b,g):fetch(a,e).then(d||b).then(f)},post$$:function(a,e,c,d){var g=N.auth$$;e={method:"POST",body:e};O&&(a=O+a);return c||g?new ea(a,e,d||b,g):fetch(a,e).then(d||b).then(f)}};window.rpc_config_d=q;var N=window.rpc_config||q,O=window.rpc_host||"",P={},q=Object.freeze({getItem:function(a){return P[a]},setItem:function(a,
b){P[a]=b;return!0},removeItem:function(a){return a in P&&delete P[a]},clear:function(){P={};return!0}}),T=window.localStorage||q,ma=function(a){var b=0;a+="x";for(var c=0;c<a.length;c++)2147483647<b&&(b=parseInt(b/137)),b=131*b+a.charCodeAt(c);return b},na=function(a){var b="#";a.forEach(function(a){16>a&&(b+=0);b+=a.toString(16)});return b},oa=function(a,b,c){a/=360;var e=.5>c?c*(1+b):c+b-c*b,d=2*c-e;return[a+1/3,a,a-1/3].map(function(a){0>a&&a++;1<a&&a--;a=a<1/6?d+6*(e-d)*a:.5>a?e:a<2/3?d+6*(e-
d)*(2/3-a):d;return Math.round(255*a)})},q=function(a){a=a||{};var b=[a.lightness,a.saturation].map(function(a){a=a||[.35,.5,.65];return"[object Array]"===Object.prototype.toString.call(a)?a.concat():[a]});this.L=b[0];this.S=b[1];this.hash=a.hash||ma};q.prototype.hsl=function(a){var b=this.hash(a);a=b%359;b=parseInt(b/360);var c=this.S[b%this.S.length];b=parseInt(b/this.S.length);return[a,c,this.L[b%this.L.length]]};q.prototype.rgb=function(a){a=this.hsl(a);return oa.apply(this,a)};q.prototype.hex=
function(a){a=this.rgb(a);return na(a)};var ka=new q,q=window.auth_config||{},x=q.host||"",pa=q.flags||0,fa=q.proxy||x+"/iframe/",Z=x&&document.createElement("iframe"),ga=window.location.href,ha=window.addEventListener||window.attachEvent,ia=window.addEventListener?"message":"onmessage",aa,Q,U,Y,A=function(){var a;ja(function(b,c){if(!a.get("loading")){var e=a.m;b?c&&c.es_token?(e.session.auth_data=c,N.get$$("/auth/user/login?es_token\x3d"+c.es_token,void 0).then(e.login$$S).then(void 0,e.login$$F)):
e.login$$F("Failed to login to provider."):e.login$$F(c)}});return{data:function(){return{loading:!1,errmsg:"",authenticated:!1,user_nick:"",users:[]}},helpers:{toHexColor:d},oncreate:function(){a=this;x&&(O=x);var b=k("access"),c=k("session")||{auth_data:null,user:null};Object.defineProperty(this,"m",{enumerable:!1,value:{login$$S:this.login$$S.bind(this),login$$F:this.login$$F.bind(this),fetch$$S:this.fetch$$S.bind(this),fetch$$F:this.fetch$$F.bind(this),access:b,session:c}});b&&c&&c.user&&b.es_user===
c.user["3"]&&(this.set({authenticated:!0,loading:!0,user_nick:b.es_user}),c=this.m,N.post$$("/auth/user/User/list?access_token\x3d"+b.token,'{"1":true}').then(c.fetch$$S).then(void 0,c.fetch$$F))},methods:{pop:function(a){if(!this.get("loading"))if(this.set({errmsg:""}),x){for(var b="",c=0;10>c;c++)b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));U=b;1===(1&pa)?(Q||(Q="none",ha(ia,u,!1)),I(fa+"#"+U+"~"+a+"~"+x+"~"+ga,"Login")):(Y||(Y=Z.style,
Y.width="100%",Y.border="none",ha(ia,u,!1),document.body.appendChild(Z)),Q=Q?"":a+".html",Z.src=fa+Q+"#"+U+"~"+a+"~"+ga)}else I("/login-"+a,"Login")},login$$S:function(a){var b=this.m,c=b.session,e=a["2"];a={token:a["1"],es_user:e["3"]};c.user=e;b.access=a;h("session",c);h("access",a);this.set({authenticated:!0,user_nick:a.es_user});N.post$$("/auth/user/User/list?access_token\x3d"+a.token,'{"1":true}').then(b.fetch$$S).then(void 0,b.fetch$$F)},login$$F:function(a){this.set({loading:!1,errmsg:c(a)})},
logout:function(){T.removeItem("access");T.removeItem("session");this.set({authenticated:!1,users:[]})},fetch$$S:function(a){this.set({loading:!1,errmsg:"",users:a["1"]})},fetch$$F:function(a){this.set({loading:!1,errmsg:c(a),users:[]})}}}}();R(M.prototype,A.methods,{get:function(a){return a?this._state[a]:this._state},fire:function(a,b){if(a=a in this._handlers&&this._handlers[a].slice())for(var c=0;c<a.length;c+=1)a[c].call(this,b)},observe:function(a,b,c){var d=c&&c.defer?this._observers.post:
this._observers.pre;(d[a]||(d[a]=[])).push(b);c&&!1===c.init||(b.__calling=!0,b.call(this,this._state[a]),b.__calling=!1);return{cancel:function(){var c=d[a].indexOf(b);~c&&d[a].splice(c,1)}}},on:function(a,b){if("teardown"===a)return this.on("destroy",b);var c=this._handlers[a]||(this._handlers[a]=[]);c.push(b);return{cancel:function(){var a=c.indexOf(b);~a&&c.splice(a,1)}}},set:function(a){this._set(R({},a));this._root._flush()},_flush:function(){if(this._renderHooks)for(;this._renderHooks.length;)this._renderHooks.pop()()}});
M.prototype._set=function(a){var b=this._state;this._state=R({},b,a);S(this,this._observers.pre,a,b);this._fragment.update(a,this._state);S(this,this._observers.post,a,b)};M.prototype.teardown=M.prototype.destroy=function(a){this.fire("destroy");!1!==a&&this._fragment.unmount();this._fragment.destroy();this._fragment=null;this._state={};this._torndown=!0};window.home=new M({target:document.getElementById("auth")})})();
//# sourceMappingURL=build.js.map
