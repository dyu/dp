var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,f,h){b!=Array.prototype&&b!=Object.prototype&&(b[f]=h.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(b,f,h,l){if(f){h=$jscomp.global;b=b.split(".");for(l=0;l<b.length-1;l++){var d=b[l];d in h||(h[d]={});h=h[d]}b=b[b.length-1];l=h[b];f=f(l);f!=l&&null!=f&&$jscomp.defineProperty(h,b,{configurable:!0,writable:!0,value:f})}};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;
$jscomp.Symbol=function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+$jscomp.symbolCounter_++};$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.arrayIterator=function(b){var f=0;return $jscomp.iteratorPrototype(function(){return f<b.length?{done:!1,value:b[f++]}:{done:!0}})};$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};
$jscomp.iteratorFromArray=function(b,f){$jscomp.initSymbolIterator();b instanceof String&&(b+="");var h=0,l={next:function(){if(h<b.length){var d=h++;return{value:f(d,b[d]),done:!1}}l.next=function(){return{done:!0,value:void 0}};return l.next()}};l[Symbol.iterator]=function(){return l};return l};$jscomp.polyfill("Array.prototype.entries",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(b,h){return[b,h]})}},"es6-impl","es3");
$jscomp.makeIterator=function(b){$jscomp.initSymbolIterator();var f=b[Symbol.iterator];return f?f.call(b):$jscomp.arrayIterator(b)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(b){function f(){this.batch_=null}function h(c){return c instanceof d?c:new d(function(b,d){b(c)})}if(b&&!$jscomp.FORCE_POLYFILL_PROMISE)return b;f.prototype.asyncExecute=function(c){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(c);return this};f.prototype.asyncExecuteBatch_=function(){var c=this;this.asyncExecuteFunction(function(){c.executeBatch_()})};var l=$jscomp.global.setTimeout;f.prototype.asyncExecuteFunction=function(c){l(c,
0)};f.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var c=this.batch_;this.batch_=[];for(var b=0;b<c.length;++b){var d=c[b];delete c[b];try{d()}catch(w){this.asyncThrow_(w)}}}this.batch_=null};f.prototype.asyncThrow_=function(b){this.asyncExecuteFunction(function(){throw b;})};var d=function(b){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var c=this.createResolveAndReject_();try{b(c.resolve,c.reject)}catch(J){c.reject(J)}};d.prototype.createResolveAndReject_=
function(){function b(b){return function(c){f||(f=!0,b.call(d,c))}}var d=this,f=!1;return{resolve:b(this.resolveTo_),reject:b(this.reject_)}};d.prototype.resolveTo_=function(b){if(b===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(b instanceof d)this.settleSameAsPromise_(b);else{a:switch(typeof b){case "object":var c=null!=b;break a;case "function":c=!0;break a;default:c=!1}c?this.resolveToNonPromiseObj_(b):this.fulfill_(b)}};d.prototype.resolveToNonPromiseObj_=function(b){var c=
void 0;try{c=b.then}catch(J){this.reject_(J);return}"function"==typeof c?this.settleSameAsThenable_(c,b):this.fulfill_(b)};d.prototype.reject_=function(b){this.settle_(2,b)};d.prototype.fulfill_=function(b){this.settle_(1,b)};d.prototype.settle_=function(b,d){if(0!=this.state_)throw Error("Cannot settle("+b+", "+d|"): Promise already settled in state"+this.state_);this.state_=b;this.result_=d;this.executeOnSettledCallbacks_()};d.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var b=
this.onSettledCallbacks_,d=0;d<b.length;++d)b[d].call(),b[d]=null;this.onSettledCallbacks_=null}};var K=new f;d.prototype.settleSameAsPromise_=function(b){var d=this.createResolveAndReject_();b.callWhenSettled_(d.resolve,d.reject)};d.prototype.settleSameAsThenable_=function(b,d){var c=this.createResolveAndReject_();try{b.call(d,c.resolve,c.reject)}catch(w){c.reject(w)}};d.prototype.then=function(b,f){function c(b,d){return"function"==typeof b?function(d){try{h(b(d))}catch(X){k(X)}}:d}var h,k,l=new d(function(b,
d){h=b;k=d});this.callWhenSettled_(c(b,h),c(f,k));return l};d.prototype.catch=function(b){return this.then(void 0,b)};d.prototype.callWhenSettled_=function(b,d){function c(){switch(f.state_){case 1:b(f.result_);break;case 2:d(f.result_);break;default:throw Error("Unexpected state: "+f.state_);}}var f=this;null==this.onSettledCallbacks_?K.asyncExecute(c):this.onSettledCallbacks_.push(function(){K.asyncExecute(c)})};d.resolve=h;d.reject=function(b){return new d(function(d,c){c(b)})};d.race=function(b){return new d(function(d,
c){for(var f=$jscomp.makeIterator(b),k=f.next();!k.done;k=f.next())h(k.value).callWhenSettled_(d,c)})};d.all=function(b){var c=$jscomp.makeIterator(b),f=c.next();return f.done?h([]):new d(function(b,d){function k(d){return function(c){l[d]=c;m--;0==m&&b(l)}}var l=[],m=0;do l.push(void 0),m++,h(f.value).callWhenSettled_(k(l.length-1),d),f=c.next();while(!f.done)})};return d},"es6-impl","es3");
(function(){function b(a){var e=a.status;if(200>e||299<e)throw e;return a.text()}function f(a){var e=a.charAt(0),b=a.length,b="\n"===a.charAt(b-1)?b-2:b;if("+"===e){a=JSON.parse(a.substring(1,b));if(a[0])throw a;return 2===a.length?a[1]:a}if("-"!==e)throw Error("Malformed response.");if("["!==a.charAt(1))throw Error(a.substring(1,b));throw JSON.parse(a.substring(1,b));}function h(a){a=P.getItem(a);return null==a?null:JSON.parse(a)}function l(a,b){try{return P.setItem(a,JSON.stringify(b)),!0}catch(g){return!1}}
function d(a){return ha.hex(a)}function K(a){return Array.isArray(a)?a[1]["1"]:String(a)}function c(a){ca=a;Q||(window.handleOauth=a)}function ga(a){a=JSON.parse(a.data);Array.isArray(a)&&3===a.length&&a[2]===Y&&ca(a[0],a[1])}function J(){}function w(a){for(var b=arguments,g,d,A=1,c=arguments.length;A<c;A++)for(g in d=b[A],d)a[g]=d[g];return a}function k(a,b){b.appendChild(a)}function z(a){a.parentNode.removeChild(a)}function q(a){return document.createElement(a)}function m(a){return document.createTextNode(a)}
function ba(a,b,g,d){for(var e in b)if(e in g){var c=g[e],f=d[e];if(c!==f||c&&"object"===typeof c||"function"===typeof c){var G=b[e];if(G)for(var h=0;h<G.length;h+=1){var k=G[h];k.__calling||(k.__calling=!0,k.call(a,c,f),k.__calling=!1)}}}}function X(a,b){function e(a){b.set({errmsg:""})}function d(a){b.pop("google")}function c(a){b.pop("github")}function f(a){b.pop("gitlab")}function h(a){b.pop("bitbucket")}function l(a){b.logout()}var n,R,S,T,U,B=q("div");B.className=n=a.errmsg?"msg error":"hide";
var v=q("b");B.appendChild(v);v.addEventListener("click",e,!1);k(m("x"),v);k(m("\n  "),B);var p=q("span");B.appendChild(p);var w=m(R=a.errmsg);p.appendChild(w);var r=m("\n"),t=q("div");t.className=S=a.authenticated?"hide":"";p=q("span");t.appendChild(p);k(m("Login with"),p);k(m("\n  "),t);var C=q("button");t.appendChild(C);C.className="stripped";C.addEventListener("click",d,!1);k(m("google"),C);k(m(" |\n  "),t);var D=q("button");t.appendChild(D);D.className="stripped";D.addEventListener("click",c,
!1);k(m("github"),D);k(m(" |\n  "),t);var E=q("button");t.appendChild(E);E.className="stripped";E.addEventListener("click",f,!1);k(m("gitlab"),E);k(m(" |\n  "),t);var F=q("button");t.appendChild(F);F.className="stripped";F.addEventListener("click",h,!1);k(m("bitbucket"),F);var x=m("\n"),y=q("div");y.className=T=a.authenticated?"":"hide";p=q("span");y.appendChild(p);p.className="name";var da=m(U=a.user_nick);p.appendChild(da);k(m("\u00a0\u00a0\n  "),y);var L=q("button");y.appendChild(L);L.className=
"outlined";L.addEventListener("click",l,!1);k(m("Logout"),L);k(m("\n  "),y);p=q("div");y.appendChild(p);p.className="header";k(m("Users"),p);k(m("\n  "),y);for(var p=a.users,u=[],H=0;H<p.length;H+=1)u[H]=ea(a,p,p[H],H,b),u[H].mount(y,null);return{mount:function(a,b){a.insertBefore(B,b);a.insertBefore(r,b);a.insertBefore(t,b);a.insertBefore(x,b);a.insertBefore(y,b)},update:function(a,x){n!==(n=x.errmsg?"msg error":"hide")&&(B.className=n);R!==(R=x.errmsg)&&(w.data=R);S!==(S=x.authenticated?"hide":
"")&&(t.className=S);T!==(T=x.authenticated?"":"hide")&&(y.className=T);U!==(U=x.user_nick)&&(da.data=U);var e=x.users;if("users"in a){for(var g=0;g<e.length;g+=1)u[g]?u[g].update(a,x,e,e[g],g):(u[g]=ea(x,e,e[g],g,b),u[g].mount(y,null));for(;g<u.length;g+=1)u[g].unmount(),u[g].destroy();u.length=e.length}},unmount:function(){z(B);z(r);z(t);z(x);z(y);for(var a=0;a<u.length;a+=1)u[a].unmount()},destroy:function(){v.removeEventListener("click",e,!1);C.removeEventListener("click",d,!1);D.removeEventListener("click",
c,!1);E.removeEventListener("click",f,!1);F.removeEventListener("click",h,!1);L.removeEventListener("click",l,!1);for(var a=0;a<u.length;a+=1)u[a]&&u[a].destroy(!1)}}}function ea(a,b,g,d,c){var e,f,A=q("div");A.className="name item";A.style.cssText=e="color:"+I.helpers.toHexColor(g["3"]);var G=m(f=g["3"]);A.appendChild(G);return{mount:function(a,b){a.insertBefore(A,b)},update:function(a,b,g,d,c){e!==(e="color:"+I.helpers.toHexColor(d["3"]))&&(A.style.cssText=e);f!==(f=d["3"])&&(G.data=f)},unmount:function(){z(A)},
destroy:J}}function M(a){a=a||{};this._state=w(I.data(),a.data);this._observers={pre:Object.create(null),post:Object.create(null)};this._handlers=Object.create(null);this._root=a._root||this;this._yield=a._yield;this._torndown=!1;this._fragment=X(this._state,this);a.target&&this._fragment.mount(a.target,null);a._root?a._root._renderHooks.push(I.oncreate.bind(this)):I.oncreate.call(this)}(function(a){function b(a){"string"!==typeof a&&(a=String(a));if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(a))throw new TypeError("Invalid character in header field name");
return a.toLowerCase()}function g(a){"string"!==typeof a&&(a=String(a));return a}function d(a){var b={next:function(){var b=a.shift();return{done:void 0===b,value:b}}};r.iterable&&(b[Symbol.iterator]=function(){return b});return b}function c(a){this.map={};a instanceof c?a.forEach(function(a,b){this.append(b,a)},this):a&&Object.getOwnPropertyNames(a).forEach(function(b){this.append(b,a[b])},this)}function f(a){if(a.bodyUsed)return Promise.reject(new TypeError("Already read"));a.bodyUsed=!0}function h(a){return new Promise(function(b,
e){a.onload=function(){b(a.result)};a.onerror=function(){e(a.error)}})}function k(a){var b=new FileReader,e=h(b);b.readAsArrayBuffer(a);return e}function l(a){a=new Uint8Array(a);for(var b=Array(a.length),e=0;e<a.length;e++)b[e]=String.fromCharCode(a[e]);return b.join("")}function m(a){if(a.slice)return a.slice(0);var b=new Uint8Array(a.byteLength);b.set(new Uint8Array(a));return b.buffer}function q(){this.bodyUsed=!1;this._initBody=function(a){if(this._bodyInit=a)if("string"===typeof a)this._bodyText=
a;else if(r.blob&&Blob.prototype.isPrototypeOf(a))this._bodyBlob=a;else if(r.formData&&FormData.prototype.isPrototypeOf(a))this._bodyFormData=a;else if(r.searchParams&&URLSearchParams.prototype.isPrototypeOf(a))this._bodyText=a.toString();else if(r.arrayBuffer&&r.blob&&C(a))this._bodyArrayBuffer=m(a.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else if(r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(a)||D(a)))this._bodyArrayBuffer=m(a);else throw Error("unsupported BodyInit type");
else this._bodyText="";this.headers.get("content-type")||("string"===typeof a?this.headers.set("content-type","text/plain;charset\x3dUTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(a)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset\x3dUTF-8"))};r.blob&&(this.blob=function(){var a=f(this);if(a)return a;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));
if(this._bodyFormData)throw Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(k)});this.text=function(){var a=f(this);if(a)return a;if(this._bodyBlob){var a=this._bodyBlob,b=new FileReader,e=h(b);b.readAsText(a);return e}if(this._bodyArrayBuffer)return Promise.resolve(l(this._bodyArrayBuffer));if(this._bodyFormData)throw Error("could not read FormData body as text");
return Promise.resolve(this._bodyText)};r.formData&&(this.formData=function(){return this.text().then(w)});this.json=function(){return this.text().then(JSON.parse)};return this}function n(a,b){b=b||{};var e=b.body;if("string"===typeof a)this.url=a;else{if(a.bodyUsed)throw new TypeError("Already read");this.url=a.url;this.credentials=a.credentials;b.headers||(this.headers=new c(a.headers));this.method=a.method;this.mode=a.mode;e||null==a._bodyInit||(e=a._bodyInit,a.bodyUsed=!0)}this.credentials=b.credentials||
this.credentials||"omit";if(b.headers||!this.headers)this.headers=new c(b.headers);a=b.method||this.method||"GET";var g=a.toUpperCase();this.method=-1<E.indexOf(g)?g:a;this.mode=b.mode||this.mode||null;this.referrer=null;if(("GET"===this.method||"HEAD"===this.method)&&e)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(e)}function w(a){var b=new FormData;a.trim().split("\x26").forEach(function(a){if(a){var e=a.split("\x3d");a=e.shift().replace(/\+/g," ");e=e.join("\x3d").replace(/\+/g,
" ");b.append(decodeURIComponent(a),decodeURIComponent(e))}});return b}function B(a){var b=new c;a.split("\r\n").forEach(function(a){var e=a.split(":");if(a=e.shift().trim())e=e.join(":").trim(),b.append(a,e)});return b}function v(a,b){b||(b={});this.type="default";this.status="status"in b?b.status:200;this.ok=200<=this.status&&300>this.status;this.statusText="statusText"in b?b.statusText:"OK";this.headers=new c(b.headers);this.url=b.url||"";this._initBody(a)}if(!a.fetch){var p="Symbol"in a&&"iterator"in
Symbol,z;if(z="FileReader"in a&&"Blob"in a)try{new Blob,z=!0}catch(x){z=!1}var r={searchParams:"URLSearchParams"in a,iterable:p,blob:z,formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};if(r.arrayBuffer){var t="[object Int8Array];[object Uint8Array];[object Uint8ClampedArray];[object Int16Array];[object Uint16Array];[object Int32Array];[object Uint32Array];[object Float32Array];[object Float64Array]".split(";");var C=function(a){return a&&DataView.prototype.isPrototypeOf(a)};var D=ArrayBuffer.isView||
function(a){return a&&-1<t.indexOf(Object.prototype.toString.call(a))}}c.prototype.append=function(a,e){a=b(a);e=g(e);var d=this.map[a];d||(d=[],this.map[a]=d);d.push(e)};c.prototype["delete"]=function(a){delete this.map[b(a)]};c.prototype.get=function(a){return(a=this.map[b(a)])?a[0]:null};c.prototype.getAll=function(a){return this.map[b(a)]||[]};c.prototype.has=function(a){return this.map.hasOwnProperty(b(a))};c.prototype.set=function(a,e){this.map[b(a)]=[g(e)]};c.prototype.forEach=function(a,b){Object.getOwnPropertyNames(this.map).forEach(function(e){this.map[e].forEach(function(g){a.call(b,
g,e,this)},this)},this)};c.prototype.keys=function(){var a=[];this.forEach(function(b,e){a.push(e)});return d(a)};c.prototype.values=function(){var a=[];this.forEach(function(b){a.push(b)});return d(a)};c.prototype.entries=function(){var a=[];this.forEach(function(b,e){a.push([e,b])});return d(a)};r.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var E="DELETE GET HEAD OPTIONS POST PUT".split(" ");n.prototype.clone=function(){return new n(this,{body:this._bodyInit})};q.call(n.prototype);
q.call(v.prototype);v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})};v.error=function(){var a=new v(null,{status:0,statusText:""});a.type="error";return a};var F=[301,302,303,307,308];v.redirect=function(a,b){if(-1===F.indexOf(b))throw new RangeError("Invalid status code");return new v(null,{status:b,headers:{location:a}})};a.Headers=c;a.Request=n;a.Response=v;a.fetch=function(a,b){return new Promise(function(e,
g){var d=new n(a,b),c=new XMLHttpRequest;c.onload=function(){var a={status:c.status,statusText:c.statusText,headers:B(c.getAllResponseHeaders()||"")};a.url="responseURL"in c?c.responseURL:a.headers.get("X-Request-URL");e(new v("response"in c?c.response:c.responseText,a))};c.onerror=function(){g(new TypeError("Network request failed"))};c.ontimeout=function(){g(new TypeError("Network request failed"))};c.open(d.method,d.url,!0);"include"===d.credentials&&(c.withCredentials=!0);"responseType"in c&&
r.blob&&(c.responseType="blob");d.headers.forEach(function(a,b){c.setRequestHeader(b,a)});c.send("undefined"===typeof d._bodyInit?null:d._bodyInit)})};a.fetch.polyfill=!0}})("undefined"!==typeof self?self:void 0);var fa=function(){function a(a,b,c,d){this.url=a;this.opts=b;this.ih=c;this.ah=d;this.handlers=[];this.authOk=this.cbFail=null}a.prototype.then=function(a,b){this.cbFail?console.warn("Cannot add a resolve/reject handler once a reject handler is provided."):a?this.handlers.push(a):(this.handlers.push(b),
this.run());return this};a.prototype.catch=function(a){this.cbFail?console.warn("Only one reject handler is allowed."):(this.handlers.push(a),this.run());return this};a.prototype.run=function(a){var b=this.url;a&&(b=b.substring(0,b.lastIndexOf("\x3d")+1)+a);a=fetch(b,this.opts).then(this.ih).then(f);for(var b=this.handlers,e=b.length-1,c=0;c<e;)a.then(b[c++]);a.then(void 0,this.cbFail||(this.cbFail=this.fail.bind(this)))};a.prototype.fail=function(a){if(this.ah&&(401===a||Array.isArray(a)&&3===a[0]))this.ah(this.authOk||
(this.authOk=this.run.bind(this)));else this.handlers[this.handlers.length-1](a)};return a}(),n={auth$$:void 0,get$$:function(a,e,c,d){var g=N.auth$$;V&&(a=V+a);return c||g?new fa(a,e,d||b,g):fetch(a,e).then(d||b).then(f)},post$$:function(a,e,c,d){var g=N.auth$$;e={method:"POST",body:e};V&&(a=V+a);return c||g?new fa(a,e,d||b,g):fetch(a,e).then(d||b).then(f)}};window.rpc_config_d=n;var N=window.rpc_config||n,V=window.rpc_host||"",O={},n=Object.freeze({getItem:function(a){return O[a]},setItem:function(a,
b){O[a]=b;return!0},removeItem:function(a){return a in O&&delete O[a]},clear:function(){O={};return!0}}),P=window.localStorage||n,ia=function(a){var b=0;a+="x";for(var c=0;c<a.length;c++)2147483647<b&&(b=parseInt(b/137)),b=131*b+a.charCodeAt(c);return b},ja=function(a){var b="#";a.forEach(function(a){16>a&&(b+=0);b+=a.toString(16)});return b},ka=function(a,b,c){a/=360;var e=.5>c?c*(1+b):c+b-c*b,d=2*c-e;return[a+1/3,a,a-1/3].map(function(a){0>a&&a++;1<a&&a--;a=a<1/6?d+6*(e-d)*a:.5>a?e:a<2/3?d+6*(e-
d)*(2/3-a):d;return Math.round(255*a)})},n=function(a){a=a||{};var b=[a.lightness,a.saturation].map(function(a){a=a||[.35,.5,.65];return"[object Array]"===Object.prototype.toString.call(a)?a.concat():[a]});this.L=b[0];this.S=b[1];this.hash=a.hash||ia};n.prototype.hsl=function(a){var b=this.hash(a);a=b%359;b=parseInt(b/360);var c=this.S[b%this.S.length];b=parseInt(b/this.S.length);return[a,c,this.L[b%this.L.length]]};n.prototype.rgb=function(a){a=this.hsl(a);return ka.apply(this,a)};n.prototype.hex=
function(a){a=this.rgb(a);return ja(a)};var ha=new n,Q=window.auth_host,Z=Q&&document.createElement("iframe"),la=window.location.href,ma=window.addEventListener||window.attachEvent,na=window.addEventListener?"message":"onmessage",ca,aa,Y,W,I=function(){var a;c(function(b,c){if(!a.get("loading")){var e=a.m;b?c&&c.es_token?(e.session.auth_data=c,N.get$$("/auth/user/login?es_token\x3d"+c.es_token,void 0).then(e.login$$S).then(void 0,e.login$$F)):e.login$$F("Failed to login to provider."):e.login$$F(c)}});
return{data:function(){return{loading:!1,errmsg:"",authenticated:!1,user_nick:"",users:[]}},helpers:{toHexColor:d},oncreate:function(){a=this;var b=h("token"),c=h("session")||{auth_data:null,user:null};Object.defineProperty(this,"m",{enumerable:!1,value:{login$$S:this.login$$S.bind(this),login$$F:this.login$$F.bind(this),fetch$$S:this.fetch$$S.bind(this),fetch$$F:this.fetch$$F.bind(this),token:b,session:c}});b&&(this.set({authenticated:!0,loading:!0,user_nick:c.user["3"]}),c=this.m,N.post$$("/auth/user/User/list?access_token\x3d"+
b,'{"1":true}').then(c.fetch$$S).then(void 0,c.fetch$$F))},methods:{pop:function(a){if(!this.get("loading"))if(this.set({errmsg:""}),Q){W||(W=Z.style,W.width="100%",W.border="none",ma(na,ga,!1),document.body.appendChild(Z));aa=aa?"":a+".html";for(var b="",c=0;10>c;c++)b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));Y=b;Z.src=Q+"/iframe/"+aa+"#"+Y+"~"+a+"~"+la}else window.open("/login-"+a,"Login","width\x3d450,height\x3d500,location\x3d1,status\x3d1,resizable\x3dyes").moveTo(window.innerWidth/
2-225,window.innerHeight/2-250)},login$$S:function(a){var b=this.m,c=b.session,e=a["1"];a=a["2"];b.token=e;c.user=a;l("token",e);l("session",c);this.set({authenticated:!0,user_nick:a["3"]});N.post$$("/auth/user/User/list?access_token\x3d"+e,'{"1":true}').then(b.fetch$$S).then(void 0,b.fetch$$F)},login$$F:function(a){this.set({loading:!1,errmsg:K(a)})},logout:function(){P.removeItem("token");P.removeItem("session");this.set({authenticated:!1,users:[]})},fetch$$S:function(a){this.set({loading:!1,errmsg:"",
users:a["1"]})},fetch$$F:function(a){this.set({loading:!1,errmsg:K(a),users:[]})}}}}();w(M.prototype,I.methods,{get:function(a){return a?this._state[a]:this._state},fire:function(a,b){if(a=a in this._handlers&&this._handlers[a].slice())for(var c=0;c<a.length;c+=1)a[c].call(this,b)},observe:function(a,b,c){var d=c&&c.defer?this._observers.post:this._observers.pre;(d[a]||(d[a]=[])).push(b);c&&!1===c.init||(b.__calling=!0,b.call(this,this._state[a]),b.__calling=!1);return{cancel:function(){var c=d[a].indexOf(b);
~c&&d[a].splice(c,1)}}},on:function(a,b){if("teardown"===a)return this.on("destroy",b);var c=this._handlers[a]||(this._handlers[a]=[]);c.push(b);return{cancel:function(){var a=c.indexOf(b);~a&&c.splice(a,1)}}},set:function(a){this._set(w({},a));this._root._flush()},_flush:function(){if(this._renderHooks)for(;this._renderHooks.length;)this._renderHooks.pop()()}});M.prototype._set=function(a){var b=this._state;this._state=w({},b,a);ba(this,this._observers.pre,a,b);this._fragment.update(a,this._state);
ba(this,this._observers.post,a,b)};M.prototype.teardown=M.prototype.destroy=function(a){this.fire("destroy");!1!==a&&this._fragment.unmount();this._fragment.destroy();this._fragment=null;this._state={};this._torndown=!0};window.home=new M({target:document.getElementById("auth")})})();
//# sourceMappingURL=build.js.map
